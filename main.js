(()=>{"use strict";const e=new class{constructor(e){this.element="string"==typeof e?document.querySelector(e):e,this.createImg=this.createImg.bind(this),this.onCloseClick=this.onCloseClick.bind(this),this.element.addEventListener("click",this.onCloseClick)}createImg(e){const t=document.createElement("li");t.className="image-item";const s=document.createElement("div");s.className="close",s.innerText="x",t.appendChild(e),t.appendChild(s),this.element.appendChild(t)}onCloseClick(e){if(!e.target.classList.contains("close"))return;const t=e.target.closest(".image-item");this.element.removeChild(t)}}(".image-list");new class{constructor(e,t){this.element="string"==typeof e?document.querySelector(e):e,this.createImg=t,this.img="",this.errorMessage=this.element.querySelector(".message-error"),this.onClick=this.onClick.bind(this),this.onLoad=this.onLoad.bind(this),this.onError=this.onError.bind(this),this.element.addEventListener("submit",this.onClick)}onClick(e){e.preventDefault();const t=this.element.querySelector(".input-link").value;this.img=document.createElement("img"),this.img.src=t,this.img.addEventListener("load",this.onLoad),this.img.addEventListener("error",this.onError)}onLoad(){this.createImg(this.img),this.errorMessage.classList.add("hidden"),this.element.reset()}onError(){this.errorMessage.classList.remove("hidden"),this.errorMessage.innerText="Неверный URL изображения"}}(".form",e.createImg)})();